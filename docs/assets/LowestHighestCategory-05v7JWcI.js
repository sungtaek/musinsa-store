import{l as u,a as l,j as e,C as y}from"./index-vWEjdDY1.js";import{b as N}from"./cil-monitor-B3oJwQN9.js";import{C as p,a as n}from"./CRow-Dc-PYaZc.js";import{C as S,a as k}from"./CCardBody-Dam5KOrS.js";import{C as v}from"./CCardHeader-Bzy8KaYG.js";import{C as T}from"./CForm-AdzqmbFD.js";import{C as R}from"./CFormSelect-VOsUF9Zt.js";import{C as B}from"./CButton-CgS9ie_u.js";import{C as E,a as H,b as x,c as j,d as z,e as o}from"./CTable-B-gMQnW2.js";import{C as F}from"./CAlert-CufGyYIg.js";import{c as P}from"./cil-burn-DKRRBsQY.js";import"./DefaultLayout-DmxUTzH6.js";const L=a=>{var t,c,i,s;if(a.data.lowestPrice.products,a!=null&&a.data)return{category:a.data.category,lowest:(c=(t=a.data.lowestPrice)==null?void 0:t.products)==null?void 0:c[0],highest:(s=(i=a.data.highestPrice)==null?void 0:i.products)==null?void 0:s[0]}},Q=()=>{const a=u(r=>r.backendUrl),t=u(r=>r.categories),[c,i]=l.useState(Object.keys(t)[0]),[s,f]=l.useState(null),[d,h]=l.useState(!1),[C,g]=l.useState(null),b=()=>{h(!0),g(null),fetch(a+"/api/v1/products/lowest-highest-category?category="+c).then(r=>r.ok?r.json():r.json().then(m=>{const w=`Network error: ${r.status} - ${m.message}`;throw new Error(w)})).then(r=>{f(L(r)),h(!1)}).catch(r=>{g(r),h(!1)})};return e.jsx(p,{children:e.jsx(n,{xs:12,children:e.jsxs(S,{className:"mb-4",children:[e.jsx(v,{children:e.jsx("strong",{children:"최저/최고가 카테고리"})}),e.jsxs(k,{children:[e.jsxs(T,{className:"row g-3 justify-content-end",onSubmit:b,children:[e.jsx(n,{xs:"auto",className:"text-end",children:e.jsx(R,{"aria-label":"카테고리",size:"sm",defaultValue:c,onChange:r=>i(r.target.value),children:Object.entries(t).map(([r,m])=>e.jsx("option",{value:r,children:m}))})}),e.jsx(n,{xs:"auto",className:"text-end",children:e.jsxs(B,{type:"submit",color:"primary",variant:"outline",size:"sm",disabled:d,children:[d&&e.jsx(y,{as:"span",size:"sm","aria-hidden":"true"}),!d&&e.jsx(e.Fragment,{children:"검색"})]})})]}),(s==null?void 0:s.category)&&e.jsx(p,{children:e.jsx(n,{children:e.jsx("h5",{children:e.jsxs("b",{children:["카테고리: ",t[s.category]]})})})}),e.jsxs(E,{hover:!0,children:[e.jsx(H,{children:e.jsxs(x,{children:[e.jsx(j,{scope:"col"}),e.jsx(j,{scope:"col",children:"브랜드"}),e.jsx(j,{scope:"col",children:"가격"})]})}),e.jsxs(z,{children:[(s==null?void 0:s.lowest)&&e.jsxs(x,{children:[e.jsx(o,{children:"최저가"}),e.jsx(o,{children:s.lowest.brandName}),e.jsx(o,{children:s.lowest.price})]},0),(s==null?void 0:s.highest)&&e.jsxs(x,{children:[e.jsx(o,{children:"최고가"}),e.jsx(o,{children:s.highest.brandName}),e.jsx(o,{children:s.highest.price})]},1)]})]}),C&&e.jsxs(F,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(N,{icon:P,className:"flex-shrink-0 me-2",width:24,height:24}),e.jsx("div",{children:C.message})]})]})]})})})};export{Q as default};
