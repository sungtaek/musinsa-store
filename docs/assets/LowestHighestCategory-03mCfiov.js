import{l as u,a as l,j as e,C as y}from"./index-CZQsGjd-.js";import{b as N}from"./cil-monitor-C7IKq9X3.js";import{C as p,a as n}from"./CRow-Ctu-Q85f.js";import{C as S,a as T}from"./CCardBody-DV2l3YLF.js";import{C as k}from"./CCardHeader-BTSib23E.js";import{C as v}from"./CForm-B1sfIlCz.js";import{C as E}from"./CFormSelect-BjBTxJO2.js";import{C as R}from"./CButton-CI2Y2_wg.js";import{C as B,a as H,b as x,c as C,d as P,e as o}from"./CTable-DWbnG71i.js";import{C as z}from"./CAlert-CAoUiNuw.js";import{c as F}from"./cil-burn-DKRRBsQY.js";import"./DefaultLayout-BVUjKWgz.js";const L=a=>{var t,c,i,s;if(a.data.lowestPrice.products,a!=null&&a.data)return{category:a.data.category,lowest:(c=(t=a.data.lowestPrice)==null?void 0:t.products)==null?void 0:c[0],highest:(s=(i=a.data.highestPrice)==null?void 0:i.products)==null?void 0:s[0]}},Q=()=>{const a=u(r=>r.backendUrl),t=u(r=>r.categories),[c,i]=l.useState(Object.keys(t)[0]),[s,f]=l.useState(null),[d,h]=l.useState(!1),[j,g]=l.useState(null),b=()=>{h(!0),g(null),fetch(a+"/api/v1/products/lowest-highest-category?category="+c,{method:"GET",headers:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:"0"}}).then(r=>r.ok?r.json():r.json().then(m=>{const w=`Network error: ${r.status} - ${m.message}`;throw new Error(w)})).then(r=>{f(L(r)),h(!1)}).catch(r=>{g(r),h(!1)})};return e.jsx(p,{children:e.jsx(n,{xs:12,children:e.jsxs(S,{className:"mb-4",children:[e.jsx(k,{children:e.jsx("strong",{children:"최저/최고가 카테고리"})}),e.jsxs(T,{children:[e.jsxs(v,{className:"row g-3 justify-content-end",onSubmit:b,children:[e.jsx(n,{xs:"auto",className:"text-end",children:e.jsx(E,{"aria-label":"카테고리",size:"sm",defaultValue:c,onChange:r=>i(r.target.value),children:Object.entries(t).map(([r,m])=>e.jsx("option",{value:r,children:m}))})}),e.jsx(n,{xs:"auto",className:"text-end",children:e.jsxs(R,{type:"submit",color:"primary",variant:"outline",size:"sm",disabled:d,children:[d&&e.jsx(y,{as:"span",size:"sm","aria-hidden":"true"}),!d&&e.jsx(e.Fragment,{children:"검색"})]})})]}),(s==null?void 0:s.category)&&e.jsx(p,{children:e.jsx(n,{children:e.jsx("h5",{children:e.jsxs("b",{children:["카테고리: ",t[s.category]]})})})}),e.jsxs(B,{hover:!0,children:[e.jsx(H,{children:e.jsxs(x,{children:[e.jsx(C,{scope:"col"}),e.jsx(C,{scope:"col",children:"브랜드"}),e.jsx(C,{scope:"col",children:"가격"})]})}),e.jsxs(P,{children:[(s==null?void 0:s.lowest)&&e.jsxs(x,{children:[e.jsx(o,{children:"최저가"}),e.jsx(o,{children:s.lowest.brandName}),e.jsx(o,{children:s.lowest.price})]},0),(s==null?void 0:s.highest)&&e.jsxs(x,{children:[e.jsx(o,{children:"최고가"}),e.jsx(o,{children:s.highest.brandName}),e.jsx(o,{children:s.highest.price})]},1)]})]}),j&&e.jsxs(z,{color:"danger",className:"d-flex align-items-center",children:[e.jsx(N,{icon:F,className:"flex-shrink-0 me-2",width:24,height:24}),e.jsx("div",{children:j.message})]})]})]})})})};export{Q as default};
